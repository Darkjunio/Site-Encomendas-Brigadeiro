<!DOCTYPE html>
<html lang="pt-BR" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Brigadeiros da Alegria üç¨</title>
  <meta name="description" content="Encomende brigadeiros artesanais com entrega na faculdade! Pre√ßo √∫nico R$ 3,00 por unidade." />
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { background: #fff8f0; }
    .btn-whatsapp {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background-color: #25d366;
      color: white;
      padding: 15px 20px;
      border-radius: 9999px;
      font-weight: bold;
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
      transition: background-color 0.3s ease;
      z-index: 1000;
      display: flex;
      align-items: center;
      gap: 8px;
      text-decoration: none;
    }
    .btn-whatsapp:hover {
      background-color: #1ebe57;
    }
  </style>
</head>
<body class="min-h-screen flex flex-col">

  <!-- Header -->
  <header class="bg-pink-600 text-white text-center py-6 shadow-md">
    <h1 class="text-3xl font-extrabold mb-1">Brigadeiros da Alegria üç¨</h1>
    <p class="text-lg font-light italic">Brigadeiros que derretem no cora√ß√£o üíñ</p>
  </header>

  <!-- Main -->
  <main class="flex-grow container mx-auto px-4 py-8 max-w-4xl">

    <!-- Sabores -->
    <section>
      <h2 class="text-2xl font-semibold mb-6 text-pink-700">Sabores Individuais - R$ 3,00</h2>
      <div id="sabores" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6"></div>
    </section>

    <!-- Combos Promocionais -->
    <section class="mt-10">
      <h2 class="text-2xl font-semibold mb-4 text-pink-700">üéÅ Combos Promocionais</h2>
      <div class="bg-white rounded-lg shadow-md p-4">
        <!-- Combo 6 unidades -->
        <div class="mb-6 border-b border-pink-200 pb-4">
          <h3 class="font-semibold text-lg text-pink-600 mb-2">Combo 6 unidades - R$ 15,00</h3>
          <p class="mb-2">Escolha at√© 2 sabores para seu combo.</p>
          <select id="combo6-sabor1" class="border border-gray-300 rounded px-3 py-2 w-full mb-2" aria-label="Sabor 1 do combo 6">
            <option value="">Selecione um sabor</option>
          </select>
          <select id="combo6-sabor2" class="border border-gray-300 rounded px-3 py-2 w-full" aria-label="Sabor 2 do combo 6">
            <option value="">Selecione um sabor</option>
          </select>
          <button id="btn-combo6" class="mt-3 w-full bg-pink-600 text-white font-semibold py-2 rounded hover:bg-pink-700 transition">Adicionar Combo 6</button>
        </div>

        <!-- Combo 12 unidades -->
        <div class="mb-6 border-b border-pink-200 pb-4">
          <h3 class="font-semibold text-lg text-pink-600 mb-2">Combo 12 unidades com caixa decorada - R$ 28,00</h3>
          <p class="mb-2">Escolha at√© 4 sabores para seu combo.</p>
          <select id="combo12-sabor1" class="border border-gray-300 rounded px-3 py-2 w-full mb-2" aria-label="Sabor 1 do combo 12"></select>
          <select id="combo12-sabor2" class="border border-gray-300 rounded px-3 py-2 w-full mb-2" aria-label="Sabor 2 do combo 12"></select>
          <select id="combo12-sabor3" class="border border-gray-300 rounded px-3 py-2 w-full mb-2" aria-label="Sabor 3 do combo 12"></select>
          <select id="combo12-sabor4" class="border border-gray-300 rounded px-3 py-2 w-full" aria-label="Sabor 4 do combo 12"></select>
          <button id="btn-combo12" class="mt-3 w-full bg-pink-600 text-white font-semibold py-2 rounded hover:bg-pink-700 transition">Adicionar Combo 12</button>
        </div>

        <!-- Combo Presente Surpresa -->
        <div>
          <h3 class="font-semibold text-lg text-pink-600 mb-2">Combo Presente Surpresa - R$ 9,00 (3 unidades)</h3>
          <p class="mb-2">Escolha at√© 3 sabores surpresa.</p>
          <select id="combo-surpresa-sabor1" class="border border-gray-300 rounded px-3 py-2 w-full mb-2" aria-label="Sabor 1 do combo surpresa"></select>
          <select id="combo-surpresa-sabor2" class="border border-gray-300 rounded px-3 py-2 w-full mb-2" aria-label="Sabor 2 do combo surpresa"></select>
          <select id="combo-surpresa-sabor3" class="border border-gray-300 rounded px-3 py-2 w-full" aria-label="Sabor 3 do combo surpresa"></select>
          <button id="btn-combo-surpresa" class="mt-3 w-full bg-pink-600 text-white font-semibold py-2 rounded hover:bg-pink-700 transition">Adicionar Combo Presente</button>
        </div>
      </div>
    </section>

    <!-- Carrinho -->
    <section class="mt-10">
      <h2 class="text-2xl font-semibold mb-4 text-pink-700">üõí Seu Carrinho</h2>
      <div id="carrinho" class="bg-white rounded-lg shadow p-4 min-h-[100px]">
        <p class="text-gray-500">Nenhum item no carrinho.</p>
      </div>
      <p class="mt-3 font-bold text-lg text-pink-600" id="total">Total: R$ 0,00</p>
    </section>

    <!-- Finaliza√ß√£o do pedido -->
    <section class="mt-10 bg-white p-6 rounded-lg shadow">
      <h2 class="text-2xl font-semibold mb-4 text-pink-700">Finalizar Pedido</h2>
      <form id="formulario" class="space-y-4">

        <div>
          <label for="nome" class="block font-medium text-gray-700 mb-1">Nome Completo *</label>
          <input type="text" id="nome" name="nome" required class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-pink-500" />
        </div>

        <div>
          <label for="endereco" class="block font-medium text-gray-700 mb-1">Endere√ßo *</label>
          <input type="text" id="endereco" name="endereco" value="Faculdade" required class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-pink-500" />
        </div>

        <div>
          <label for="dataEntrega" class="block font-medium text-gray-700 mb-1">Data da Entrega *</label>
          <input type="date" id="dataEntrega" name="dataEntrega" required class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-pink-500" />
        </div>

        <div>
          <label for="observacoes" class="block font-medium text-gray-700 mb-1">Observa√ß√µes</label>
          <textarea id="observacoes" name="observacoes" rows="3" placeholder="Ex: sem granulado, al√©rgico a leite..." class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-pink-500"></textarea>
        </div>

        <button type="submit" class="w-full bg-pink-600 text-white font-semibold py-3 rounded hover:bg-pink-700 transition">Finalizar Pedido via WhatsApp</button>
      </form>
    </section>
  </main>

  <!-- Footer -->
  <footer class="bg-pink-100 text-center py-4 mt-10 text-pink-800 font-light">
    <p>Feito com amor, entregue com carinho ‚ù§Ô∏è</p>
    <p>Contato: <a href="https://wa.me/5561993768275" target="_blank" class="underline">WhatsApp</a> | <a href="#" class="underline">Instagram</a></p>
  </footer>

  <!-- Bot√£o WhatsApp fixo -->
  <a href="https://wa.me/5561993768275" target="_blank" aria-label="WhatsApp" class="btn-whatsapp">
    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="white" viewBox="0 0 24 24" stroke="none"><path d="M20.52 3.48A11.925 11.925 0 0012.002 0C5.373 0 0 5.372 0 12c0 2.119.55 4.17 1.6 5.976L0 24l6.163-1.608a11.91 11.91 0 005.838 1.59h.004c6.63 0 12-5.373 12-12 0-3.212-1.25-6.217-3.484-8.492zM12 21.737c-1.905 0-3.737-.512-5.333-1.48l-.38-.226-3.64.95.974-3.556-.247-.366a9.978 9.978 0 01-1.527-5.521c0-5.521 4.483-10.004 10.004-10.004 2.673 0 5.188 1.042 7.073 2.932 1.9 1.9 2.94 4.47 2.94 7.08 0 5.521-4.485 10.004-10.004 10.004z"/><path d="M16.004 13.96c-.264-.132-1.565-.77-1.808-.858-.242-.088-.418-.132-.594.132-.176.264-.68.858-.834 1.034-.154.176-.308.198-.572.066-.264-.132-1.112-.41-2.12-1.312-.784-.7-1.312-1.56-1.466-1.824-.154-.264-.016-.406.116-.538.118-.117.264-.308.396-.462.132-.154.176-.264.264-.44.088-.176.044-.33-.022-.462-.066-.132-.594-1.428-.814-1.95-.214-.512-.43-.443-.594-.452l-.51-.009c-.176 0-.462.066-.704.33s-.924.905-.924 2.204c0 1.3.946 2.56 1.08 2.738.132.176 1.86 2.838 4.508 3.978.63.272 1.12.434 1.5.555.63.202 1.2.173 1.65.105.504-.076 1.565-.64 1.786-1.26.22-.62.22-1.15.154-1.26-.066-.11-.24-.176-.504-.308z"/></svg>
    WhatsApp
  </a>

  <script>
    // Bloquear datas passadas
    const inputData = document.getElementById("dataEntrega");
    const hoje = new Date();
    const ano = hoje.getFullYear();
    const mes = String(hoje.getMonth() + 1).padStart(2, "0");
    const dia = String(hoje.getDate()).padStart(2, "0");
    inputData.min = `${ano}-${mes}-${dia}`;

    // Dados dos sabores
    const sabores = [
      { id: 1, nome: 'Tradicional', preco: 3.00, img: 'https://i.imgur.com/qTOp1v0.jpg' },
      { id: 2, nome: 'Ninho', preco: 3.00, img: 'https://i.imgur.com/WvPoKRa.jpg' },
      { id: 3, nome: 'Morango', preco: 3.00, img: 'https://i.imgur.com/IJoCg4L.jpg' },
      { id: 4, nome: 'Ninho com Nutella', preco: 3.00, img: 'https://i.imgur.com/CrqHTOg.jpg' },
      { id: 5, nome: 'Meio Amargo', preco: 3.00, img: 'https://i.imgur.com/4XaP72G.jpg' },
      { id: 6, nome: 'Beijinho', preco: 3.00, img: 'https://i.imgur.com/lSBEURm.jpg' }
    ];

    let carrinho = [];

    const saboresContainer = document.getElementById('sabores');
    const carrinhoDiv = document.getElementById('carrinho');
    const totalSpan = document.getElementById('total');

    // Fun√ß√£o para popular selects de combos
    function popularSelects() {
      const selects = [
        'combo6-sabor1', 'combo6-sabor2',
        'combo12-sabor1', 'combo12-sabor2', 'combo12-sabor3', 'combo12-sabor4',
        'combo-surpresa-sabor1', 'combo-surpresa-sabor2', 'combo-surpresa-sabor3'
      ];

      selects.forEach(id => {
        const select = document.getElementById(id);
        select.innerHTML = '<option value="">Selecione um sabor</option>';
        sabores.forEach(sabor => {
          const option = document.createElement('option');
          option.value = sabor.id;
          option.textContent = sabor.nome;
          select.appendChild(option);
        });
      });
    }

    // Renderizar sabores com controles
    function renderSabores() {
      saboresContainer.innerHTML = '';
      sabores.forEach(sabor => {
        const div = document.createElement('div');
        div.className = 'bg-white rounded-lg shadow-md p-4 flex flex-col items-center';

        div.innerHTML = `
          <img src="${sabor.img}" alt="${sabor.nome}" class="w-24 h-24 object-cover rounded-full mb-3 shadow-md" loading="lazy" />
          <h3 class="font-semibold text-pink-700 mb-2">${sabor.nome}</h3>
          <p class="mb-2 font-semibold">R$ ${sabor.preco.toFixed(2)}</p>
          <div class="flex items-center space-x-2">
            <button aria-label="Diminuir quantidade de ${sabor.nome}" data-id="${sabor.id}" class="btn-minus bg-pink-300 hover:bg-pink-400 rounded px-3 py-1 text-white font-bold">‚àí</button>
            <input aria-label="Quantidade de ${sabor.nome}" type="number" min="0" max="100" value="0" data-id="${sabor.id}" class="input-qtd w-14 text-center border rounded" />
            <button aria-label="Aumentar quantidade de ${sabor.nome}" data-id="${sabor.id}" class="btn-plus bg-pink-600 hover:bg-pink-700 rounded px-3 py-1 text-white font-bold">+</button>
          </div>
          <button aria-label="Remover ${sabor.nome} do pedido" data-id="${sabor.id}" class="btn-remove mt-2 text-xs text-red-600 hover:text-red-800 underline">Remover</button>
        `;
        saboresContainer.appendChild(div);
      });
    }

    // Atualizar carrinho e total
    function atualizarCarrinho() {
      carrinhoDiv.innerHTML = '';
      if (carrinho.length === 0) {
        carrinhoDiv.innerHTML = '<p class="text-gray-500">Nenhum item no carrinho.</p>';
        totalSpan.textContent = 'Total: R$ 0,00';
        return;
      }

      const ul = document.createElement('ul');
      ul.className = 'list-disc list-inside';

      let total = 0;

      carrinho.forEach(item => {
        const sabor = sabores.find(s => s.id === item.id);
        if (!sabor) return;

        const li = document.createElement('li');
        const subtotal = item.qtd * sabor.preco;
        total += subtotal;
        li.textContent = `${item.qtd}x ${sabor.nome} ‚Äî R$ ${subtotal.toFixed(2)}`;

        // bot√£o remover item do carrinho
        const btnRemove = document.createElement('button');
        btnRemove.textContent = '‚ùå';
        btnRemove.title = 'Remover este item';
        btnRemove.className = 'ml-3 text-red-600 hover:text-red-800';
        btnRemove.onclick = () => {
          carrinho = carrinho.filter(i => i.id !== item.id);
          sincronizarInputs();
          atualizarCarrinho();
        };

        li.appendChild(btnRemove);
        ul.appendChild(li);
      });

      carrinhoDiv.appendChild(ul);
      totalSpan.textContent = `Total: R$ ${total.toFixed(2)}`;
    }

    // Sincroniza inputs das quantidades com o carrinho
    function sincronizarInputs() {
      // Atualiza inputs e carrinho
      sabores.forEach(sabor => {
        const input = document.querySelector(`input.input-qtd[data-id="${sabor.id}"]`);
        const item = carrinho.find(i => i.id === sabor.id);
        input.value = item ? item.qtd : 0;
      });
    }

    // Adiciona ou atualiza item no carrinho
    function setQuantidade(id, qtd) {
      qtd = Number(qtd);
      if (qtd <= 0) {
        carrinho = carrinho.filter(i => i.id !== id);
      } else {
        const item = carrinho.find(i => i.id === id);
        if (item) {
          item.qtd = qtd;
        } else {
          carrinho.push({ id, qtd });
        }
      }
      atualizarCarrinho();
    }

    // Eventos para bot√µes de +, -, inputs e remover
    function adicionarEventosSabores() {
      saboresContainer.addEventListener('click', (e) => {
        if (e.target.classList.contains('btn-plus')) {
          const id = Number(e.target.dataset.id);
          const input = document.querySelector(`input.input-qtd[data-id="${id}"]`);
          let val = Number(input.value) || 0;
          input.value = val + 1;
          setQuantidade(id, val + 1);
        } else if (e.target.classList.contains('btn-minus')) {
          const id = Number(e.target.dataset.id);
          const input = document.querySelector(`input.input-qtd[data-id="${id}"]`);
          let val = Number(input.value) || 0;
          if (val > 0) {
            input.value = val - 1;
            setQuantidade(id, val - 1);
          }
        } else if (e.target.classList.contains('btn-remove')) {
          const id = Number(e.target.dataset.id);
          setQuantidade(id, 0);
          sincronizarInputs();
        }
      });

      saboresContainer.addEventListener('input', (e) => {
        if (e.target.classList.contains('input-qtd')) {
          const id = Number(e.target.dataset.id);
          let val = Number(e.target.value);
          if (isNaN(val) || val < 0) val = 0;
          if (val > 100) val = 100;
          e.target.value = val;
          setQuantidade(id, val);
        }
      });
    }

    // Adicionar combos ao carrinho
    function comboAdicionar(idSaborIds, descricao, precoTotal) {
      // idSaborIds √© array de n√∫meros (ids dos sabores)
      // Ex: [1,2] para combo 6 unidades sabores 1 e 2
      // descri√ß√£o texto para mostrar no carrinho
      // precoTotal valor fixo do combo

      // Remove do carrinho todos combos para evitar acumular combos repetidos
      carrinho = carrinho.filter(item => !item.combo);

      // adiciona o combo
      carrinho.push({ id: `combo_${Date.now()}`, qtd: 1, combo: true, descricao, precoTotal });

      atualizarCarrinhoCombo();
    }

    // Atualiza carrinho para combos (combina com o carrinho normal)
    function atualizarCarrinhoCombo() {
      carrinhoDiv.innerHTML = '';
      if (carrinho.length === 0) {
        carrinhoDiv.innerHTML = '<p class="text-gray-500">Nenhum item no carrinho.</p>';
        totalSpan.textContent = 'Total: R$ 0,00';
        return;
      }

      const ul = document.createElement('ul');
      ul.className = 'list-disc list-inside';

      let total = 0;

      carrinho.forEach(item => {
        const li = document.createElement('li');
        if (item.combo) {
          li.textContent = `${item.descricao} ‚Äî R$ ${item.precoTotal.toFixed(2)}`;

          // bot√£o remover
          const btnRemove = document.createElement('button');
          btnRemove.textContent = '‚ùå';
          btnRemove.title = 'Remover este combo';
          btnRemove.className = 'ml-3 text-red-600 hover:text-red-800';
          btnRemove.onclick = () => {
            carrinho = carrinho.filter(i => i !== item);
            sincronizarInputs();
            atualizarCarrinhoCombo();
          };

          li.appendChild(btnRemove);

          total += item.precoTotal;
        } else {
          const sabor = sabores.find(s => s.id === item.id);
          if (!sabor) return;

          const subtotal = item.qtd * sabor.preco;
          total += subtotal;
          li.textContent = `${item.qtd}x ${sabor.nome} ‚Äî R$ ${subtotal.toFixed(2)}`;

          const btnRemove = document.createElement('button');
          btnRemove.textContent = '‚ùå';
          btnRemove.title = 'Remover este item';
          btnRemove.className = 'ml-3 text-red-600 hover:text-red-800';
          btnRemove.onclick = () => {
            carrinho = carrinho.filter(i => i !== item);
            sincronizarInputs();
            atualizarCarrinhoCombo();
          };

          li.appendChild(btnRemove);
        }
        ul.appendChild(li);
      });

      carrinhoDiv.appendChild(ul);
      totalSpan.textContent = `Total: R$ ${total.toFixed(2)}`;
    }

    // Eventos combos
    function setupEventosCombos() {
      document.getElementById('btn-combo6').addEventListener('click', () => {
        const sabor1 = document.getElementById('combo6-sabor1').value;
        const sabor2 = document.getElementById('combo6-sabor2').value;
        if (!sabor1) return alert('Selecione pelo menos um sabor para o combo 6 unidades.');
        // aceita um ou dois sabores
        let descricao = 'Combo 6 unidades: ';
        const nomesSabores = [];
        if (sabor1) nomesSabores.push(sabores.find(s => s.id == sabor1).nome);
        if (sabor2 && sabor2 !== sabor1) nomesSabores.push(sabores.find(s => s.id == sabor2).nome);
        descricao += nomesSabores.join(', ');

        comboAdicionar([Number(sabor1), sabor2 ? Number(sabor2) : null].filter(Boolean), descricao, 15.00);
        alert('Combo 6 unidades adicionado ao carrinho!');
      });

      document.getElementById('btn-combo12').addEventListener('click', () => {
        const sabor1 = document.getElementById('combo12-sabor1').value;
        const sabor2 = document.getElementById('combo12-sabor2').value;
        const sabor3 = document.getElementById('combo12-sabor3').value;
        const sabor4 = document.getElementById('combo12-sabor4').value;

        const selecionados = [sabor1, sabor2, sabor3, sabor4].filter(v => v !== '');

        if (selecionados.length === 0) return alert('Selecione pelo menos um sabor para o combo 12 unidades.');

        // Remover repetidos
        const uniqueIds = [...new Set(selecionados)];

        const nomesSabores = uniqueIds.map(id => sabores.find(s => s.id == id)?.nome).filter(Boolean);

        const descricao = `Combo 12 unidades com caixa decorada: ${nomesSabores.join(', ')}`;

        comboAdicionar(uniqueIds.map(Number), descricao, 28.00);
        alert('Combo 12 unidades adicionado ao carrinho!');
      });

      document.getElementById('btn-combo-surpresa').addEventListener('click', () => {
        const sabor1 = document.getElementById('combo-surpresa-sabor1').value;
        const sabor2 = document.getElementById('combo-surpresa-sabor2').value;
        const sabor3 = document.getElementById('combo-surpresa-sabor3').value;

        const selecionados = [sabor1, sabor2, sabor3].filter(v => v !== '');

        if (selecionados.length === 0) return alert('Selecione pelo menos um sabor para o combo Presente Surpresa.');

        // Remover repetidos
        const uniqueIds = [...new Set(selecionados)];

        const nomesSabores = uniqueIds.map(id => sabores.find(s => s.id == id)?.nome).filter(Boolean);

        const descricao = `Combo Presente Surpresa (3 unidades): ${nomesSabores.join(', ')}`;

        comboAdicionar(uniqueIds.map(Number), descricao, 9.00);
        alert('Combo Presente Surpresa adicionado ao carrinho!');
      });
    }

    // Envio do pedido via WhatsApp
    function enviarPedidoWhatsApp(event) {
      event.preventDefault();

      if (carrinho.length === 0) {
        alert('Adicione pelo menos um item ao carrinho antes de finalizar o pedido.');
        return;
      }

      const nome = document.getElementById('nome').value.trim();
      const endereco = document.getElementById('endereco').value.trim();
      const dataEntrega = document.getElementById('dataEntrega').value;
      const observacoes = document.getElementById('observacoes').value.trim();

      if (!nome || !endereco || !dataEntrega) {
        alert('Preencha os campos obrigat√≥rios: Nome, Endere√ßo e Data da Entrega.');
        return;
      }

      let mensagem = `üç´ *Nova Encomenda* üç¨%0A%0A`;
      mensagem += `üë§ *Cliente:* ${encodeURIComponent(nome)}%0A`;
      mensagem += `üìç *Endere√ßo:* ${encodeURIComponent(endereco)}%0A`;
      mensagem += `üìÖ *Data da entrega:* ${dataEntrega}%0A`;
      mensagem += `üßÅ *Itens:*%0A`;

      let total = 0;

      carrinho.forEach(item => {
        if (item.combo) {
          mensagem += `- ${encodeURIComponent(item.descricao)} ‚Äî R$ ${item.precoTotal.toFixed(2)}%0A`;
          total += item.precoTotal;
        } else {
          const sabor = sabores.find(s => s.id === item.id);
          if (!sabor) return;
          const subtotal = item.qtd * sabor.preco;
          total += subtotal;
          mensagem += `- ${item.qtd}x ${encodeURIComponent(sabor.nome)} ‚Äî R$ ${subtotal.toFixed(2)}%0A`;
        }
      });

      mensagem += `üíµ *Total:* R$ ${total.toFixed(2)}%0A`;
      mensagem += `üìù *Observa√ß√µes:* ${encodeURIComponent(observacoes || 'Nenhuma')}%0A`;

      const telefone = '5561993768275'; // Seu n√∫mero com c√≥digo do Brasil e DDD (61)
      const url = `https://wa.me/${telefone}?text=${mensagem}`;

      window.open(url, '_blank');
    }

    // Inicializa√ß√£o
    document.addEventListener('DOMContentLoaded', () => {
      renderSabores();
      popularSelects();
      adicionarEventosSabores();
      setupEventosCombos();

      document.getElementById('formulario').addEventListener('submit', enviarPedidoWhatsApp);
    });
  </script>
</body>
</html>
