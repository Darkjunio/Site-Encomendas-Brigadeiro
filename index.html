<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Encomendas de Brigadeiros</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <style>
    body {
      background-color: #fff8f5;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      padding-bottom: 80px; /* espa√ßo para bot√£o whatsapp fixo */
    }
    header {
      background: #e91e63;
      color: white;
      padding: 2rem 1rem;
      text-align: center;
      margin-bottom: 2rem;
    }
    h1, h2 {
      font-weight: 700;
    }
    .brigadeiro-card img {
      height: 120px;
      object-fit: cover;
      border-radius: 8px;
    }
    .card-title {
      color: #c2185b;
      font-weight: 600;
    }
    .btn-whatsapp {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background-color: #25d366;
      border: none;
      border-radius: 50%;
      width: 60px;
      height: 60px;
      font-size: 30px;
      color: white;
      box-shadow: 0 4px 8px rgba(0,0,0,0.15);
      display: flex;
      justify-content: center;
      align-items: center;
      cursor: pointer;
      z-index: 1000;
    }
    .btn-whatsapp:hover {
      background-color: #1ebe5a;
    }
    #carrinho button {
      margin-left: 10px;
    }
    .combo-desc {
      font-size: 0.9rem;
      color: #555;
      margin-bottom: 0.5rem;
    }
  </style>
</head>
<body>

<header>
  <h1>üç´ Encomendas de Brigadeiros</h1>
  <p>Entrega apenas na Faculdade ¬∑ WhatsApp: (61) 99376-8275</p>
</header>

<div class="container">

  <section id="sabores" class="mb-5">
    <h2>Escolha seus sabores</h2>
    <div class="row g-3">
      <!-- Cards ser√£o gerados por JS -->
    </div>
  </section>

  <section id="combos" class="mb-5">
    <h2>Combos Promocionais</h2>
    <div class="row g-3">
      <!-- Combos gerados por JS -->
    </div>
  </section>

  <section id="carrinho" class="mb-5">
    <h2>Carrinho</h2>
    <ul class="list-group mb-3" id="lista-carrinho"></ul>
    <p><strong>Total: R$ <span id="total">0.00</span></strong></p>
    <button class="btn btn-success" onclick="finalizarPedido()">Finalizar pedido via WhatsApp</button>
  </section>

  <section id="pedido" class="mb-5">
    <h2>Dados para entrega</h2>
    <form id="pedidoForm" class="row g-3">
      <div class="col-md-6">
        <label for="nome" class="form-label">Seu nome</label>
        <input type="text" id="nome" class="form-control" required />
      </div>
      <div class="col-md-6">
        <label for="data" class="form-label">Data de entrega</label>
        <input type="date" id="data" class="form-control" required />
      </div>
      <div class="col-12">
        <label class="form-label">Local de entrega</label>
        <input type="text" class="form-control" value="Faculdade" disabled />
      </div>
      <div class="col-12">
        <label for="obs" class="form-label">Observa√ß√µes</label>
        <textarea id="obs" class="form-control" rows="3" placeholder="Ex: Favor embalar com cuidado"></textarea>
      </div>
    </form>
  </section>

</div>

<button class="btn-whatsapp" onclick="finalizarPedido()">üí¨</button>

<script>
  const sabores = [
    "Tradicional",
    "Ninho",
    "Morango",
    "Ninho com Nutella",
    "Meio Amargo",
    "Beijinho"
  ];

  const combos = [
    { nome: "Combo 6 unidades", preco: 16, permiteEscolha: true },
    { nome: "Combo 12 unidades", preco: 30, permiteEscolha: true },
    { nome: "Combo Surpresa 6 unidades", preco: 20, permiteEscolha: false },
    { nome: "Combo Surpresa 12 unidades", preco: 38, permiteEscolha: false }
  ];

  let carrinho = [];

  // Gera os cards de sabores
  function gerarSabores() {
    const container = document.querySelector("#sabores .row");
    sabores.forEach(sabor => {
      const col = document.createElement("div");
      col.className = "col-md-4";
      col.innerHTML = `
        <div class="card brigadeiro-card shadow-sm">
          <img src="https://source.unsplash.com/200x120/?brigadeiro,${encodeURIComponent(sabor)}" alt="${sabor}" class="card-img-top" />
          <div class="card-body">
            <h5 class="card-title">${sabor}</h5>
            <p class="card-text">R$ 3,00 por unidade</p>
            <button class="btn btn-primary" onclick="adicionarItem('${sabor}', 3)">Adicionar 1</button>
          </div>
        </div>
      `;
      container.appendChild(col);
    });
  }

  // Gera os combos
  function gerarCombos() {
    const container = document.querySelector("#combos .row");
    combos.forEach((combo, index) => {
      const col = document.createElement("div");
      col.className = "col-md-6";
      let escolha = "";
      if (combo.permiteEscolha) {
        escolha = `
          <label>Escolha os sabores (${combo.nome}):</label>
          <select multiple class="form-select mb-2" id="comboSabores${index}">
            ${sabores.map(s => `<option value="${s}">${s}</option>`).join("")}
          </select>
        `;
      } else {
        escolha = `<p class="combo-desc">Sabores surpresa, voc√™ s√≥ descobre quando receber!</p>`;
      }
      col.innerHTML = `
        <div class="card shadow-sm">
          <div class="card-body">
            <h5 class="card-title">${combo.nome}</h5>
            <p class="card-text">R$ ${combo.preco.toFixed(2)}</p>
            ${escolha}
            <button class="btn btn-warning" onclick="adicionarCombo(${index})">Adicionar ao carrinho</button>
          </div>
        </div>
      `;
      container.appendChild(col);
    });
  }

  function adicionarItem(nome, preco) {
    let item = carrinho.find(i => i.nome === nome);
    if (item) {
      item.qtd++;
    } else {
      carrinho.push({ nome, preco, qtd: 1 });
    }
    atualizarCarrinho();
  }

  function adicionarCombo(index) {
    const combo = combos[index];
    let saboresEscolhidos = [];
    if (combo.permiteEscolha) {
      const select = document.getElementById(`comboSabores${index}`);
      saboresEscolhidos = Array.from(select.selectedOptions).map(o => o.value);
      if (saboresEscolhidos.length === 0) {
        alert("Selecione ao menos um sabor para o combo!");
        return;
      }
    }
    // Adiciona combo ao carrinho
    carrinho.push({ nome: combo.nome, preco: combo.preco, qtd: 1, sabores: saboresEscolhidos });
    atualizarCarrinho();
  }

  function atualizarCarrinho() {
    const lista = document.getElementById("lista-carrinho");
    const totalSpan = document.getElementById("total");
    lista.innerHTML = "";
    let total = 0;
    carrinho.forEach((item, index) => {
      const li = document.createElement("li");
      li.className = "list-group-item d-flex justify-content-between align-items-center";
      let detalhes = item.sabores && item.sabores.length ? ` - Sabores: ${item.sabores.join(", ")}` : "";
      li.innerHTML = `
        <div>
          <strong>${item.nome}</strong> (x${item.qtd})${detalhes} - R$ ${(item.preco * item.qtd).toFixed(2)}
        </div>
        <button class="btn btn-danger btn-sm" onclick="removerItem(${index})">Remover</button>
      `;
      lista.appendChild(li);
      total += item.preco * item.qtd;
    });
    totalSpan.textContent = total.toFixed(2);
  }

  function removerItem(index) {
    carrinho.splice(index, 1);
    atualizarCarrinho();
  }

  function finalizarPedido() {
    const nome = document.getElementById("nome").value.trim();
    const data = document.getElementById("data").value;
    const obs = document.getElementById("obs").value.trim();

    if (!nome) {
      alert("Por favor, informe seu nome.");
      return;
    }
    if (!data) {
      alert("Por favor, informe a data de entrega.");
      return;
    }
    if (carrinho.length === 0) {
      alert("Seu carrinho est√° vazio.");
      return;
    }

    let mensagem = `Ol√°! Meu nome √© ${nome}.%0A%0AQuero fazer o pedido para entrega na Faculdade no dia ${data}.%0A%0APedido:%0A`;
    carrinho.forEach(item => {
      let detalhes = "";
      if (item.sabores && item.sabores.length) {
        detalhes = ` (Sabores: ${item.sabores.join(", ")})`;
      }
      mensagem += `- ${item.nome} x${item.qtd}${detalhes} - R$ ${(item.preco * item.qtd).toFixed(2)}%0A`;
    });
    const total = carrinho.reduce((acc, i) => acc + i.preco * i.qtd, 0);
    mensagem += `%0ATotal: R$ ${total.toFixed(2)}%0A`;
    mensagem += `Local de entrega: Faculdade%0A`;
    mensagem += `Observa√ß√µes: ${obs || "Nenhuma"}`;

    window.open(`https://wa.me/5561993768275?text=${mensagem}`, "_blank");
  }

  // Bloqueia datas passadas no input de data
  function bloquearDatasPassadas() {
    const inputData = document.getElementById("data");
    const hoje = new Date();
    const ano = hoje.getFullYear();
    const mes = String(hoje.getMonth() + 1).padStart(2, "0");
    const dia = String(hoje.getDate()).padStart(2, "0");
    inputData.min = `${ano}-${mes}-${dia}`;
  }

  bloquearDatasPassadas();
  gerarSabores();
  gerarCombos();
  atualizarCarrinho();

</script>

</body>
</html>
